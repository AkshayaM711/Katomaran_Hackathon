{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Madhu\\\\OneDrive\\\\Desktop\\\\Katomaran_Face_Platform\\\\frontend\\\\src\\\\components\\\\LiveCam.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiveCam = () => {\n  _s();\n  const vid = useRef(null);\n  const cvs = useRef(null);\n  let loop = null;\n  const sendFrame = async () => {\n    const ctx = cvs.current.getContext(\"2d\");\n    ctx.drawImage(vid.current, 0, 0, cvs.current.width, cvs.current.height);\n    const img = cvs.current.toDataURL(\"image/png\");\n    try {\n      const res = await fetch(\"http://localhost:5000/recognize\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          image: img\n        })\n      });\n      const faces = await res.json();\n      ctx.clearRect(0, 0, cvs.current.width, cvs.current.height);\n      ctx.drawImage(vid.current, 0, 0, cvs.current.width, cvs.current.height);\n      faces.forEach(f => {\n        ctx.strokeStyle = \"lime\";\n        ctx.lineWidth = 2;\n        ctx.strokeRect(f.x, f.y, f.width, f.height);\n        ctx.fillStyle = \"rgba(0,0,0,0.6)\";\n        ctx.fillRect(f.x, f.y - 18, f.name.length * 10, 18);\n        ctx.fillStyle = \"#00FF00\";\n        ctx.font = \"14px sans-serif\";\n        ctx.fillText(f.name, f.x + 4, f.y - 4);\n      });\n    } catch (e) {\n      console.error(\"recognize fail\", e);\n    }\n  };\n  const startCam = async () => {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      video: true\n    });\n    vid.current.srcObject = stream;\n    vid.current.onloadedmetadata = () => {\n      cvs.current.width = vid.current.videoWidth;\n      cvs.current.height = vid.current.videoHeight;\n      loop = setInterval(sendFrame, 800); // every 0.8 s\n    };\n  };\n  useEffect(() => () => clearInterval(loop), []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl mb-2\",\n      children: \"Live Recognition\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative inline-block\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: vid,\n        autoPlay: true,\n        muted: true,\n        className: \"rounded border\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: cvs,\n        className: \"absolute top-0 left-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startCam,\n      className: \"mt-4 bg-blue-500 text-white p-2 rounded\",\n      children: \"Start Camera\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveCam, \"uizGLTZf+BkYfyYAA+/h6W7AGVw=\");\n_c = LiveCam;\nexport default LiveCam;\nvar _c;\n$RefreshReg$(_c, \"LiveCam\");","map":{"version":3,"names":["React","useRef","useEffect","jsxDEV","_jsxDEV","LiveCam","_s","vid","cvs","loop","sendFrame","ctx","current","getContext","drawImage","width","height","img","toDataURL","res","fetch","method","headers","body","JSON","stringify","image","faces","json","clearRect","forEach","f","strokeStyle","lineWidth","strokeRect","x","y","fillStyle","fillRect","name","length","font","fillText","e","console","error","startCam","stream","navigator","mediaDevices","getUserMedia","video","srcObject","onloadedmetadata","videoWidth","videoHeight","setInterval","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","muted","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Madhu/OneDrive/Desktop/Katomaran_Face_Platform/frontend/src/components/LiveCam.jsx"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\n\r\nconst LiveCam = () => {\r\n  const vid = useRef(null);\r\n  const cvs = useRef(null);\r\n  let    loop = null;\r\n\r\n  const sendFrame = async () => {\r\n    const ctx = cvs.current.getContext(\"2d\");\r\n    ctx.drawImage(vid.current, 0, 0, cvs.current.width, cvs.current.height);\r\n    const img = cvs.current.toDataURL(\"image/png\");\r\n\r\n    try {\r\n      const res  = await fetch(\"http://localhost:5000/recognize\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ image: img }),\r\n      });\r\n      const faces = await res.json();\r\n      ctx.clearRect(0, 0, cvs.current.width, cvs.current.height);\r\n      ctx.drawImage(vid.current, 0, 0, cvs.current.width, cvs.current.height);\r\n\r\n      faces.forEach(f => {\r\n        ctx.strokeStyle = \"lime\"; ctx.lineWidth = 2;\r\n        ctx.strokeRect(f.x, f.y, f.width, f.height);\r\n        ctx.fillStyle = \"rgba(0,0,0,0.6)\";\r\n        ctx.fillRect(f.x, f.y - 18, f.name.length * 10, 18);\r\n        ctx.fillStyle = \"#00FF00\"; ctx.font = \"14px sans-serif\";\r\n        ctx.fillText(f.name, f.x + 4, f.y - 4);\r\n      });\r\n    } catch(e) {\r\n      console.error(\"recognize fail\", e);\r\n    }\r\n  };\r\n\r\n  const startCam = async () => {\r\n    const stream = await navigator.mediaDevices.getUserMedia({ video:true });\r\n    vid.current.srcObject = stream;\r\n    vid.current.onloadedmetadata = () => {\r\n      cvs.current.width  = vid.current.videoWidth;\r\n      cvs.current.height = vid.current.videoHeight;\r\n      loop = setInterval(sendFrame, 800);  // every 0.8 s\r\n    };\r\n  };\r\n\r\n  useEffect(() => () => clearInterval(loop), []);\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h2 className=\"text-xl mb-2\">Live Recognition</h2>\r\n      <div className=\"relative inline-block\">\r\n        <video ref={vid} autoPlay muted className=\"rounded border\" />\r\n        <canvas ref={cvs} className=\"absolute top-0 left-0\" />\r\n      </div>\r\n      <button onClick={startCam} className=\"mt-4 bg-blue-500 text-white p-2 rounded\">\r\n        Start Camera\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveCam;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}